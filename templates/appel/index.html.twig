{% extends 'base.html.twig' %}

{% block title %}Ø³Ø¬Ù„ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª
{% endblock %}

{% block body %}
	<div class="container mt-4">
		<div class="card shadow-sm">
			<div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
				<h2 class="mb-0">ğŸ“ Ø³Ø¬Ù„ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª</h2>
			</div>
			<div
				class="card-body">
				<!-- Formulaire de filtres -->
				<div class="row mb-4">
					<div class="col-md-12">
						{{ form_start(filterForm, {'method': 'GET'}) }}
						<div class="row">
							<div class="col-md-3">{{ form_row(filterForm.dateDebut) }}</div>
							<div class="col-md-3">{{ form_row(filterForm.dateFin) }}</div>
							<div class="col-md-3">{{ form_row(filterForm.contact) }}</div>
							<div class="col-md-3">{{ form_row(filterForm.type) }}</div>
						</div>
                        <br>
						<div class="row">
							<div class="col-md-12">
								<button type="submit" class="btn btn-primary">
									<i class="bi bi-filter"></i>
									ØªØµÙÙŠØ©
								</button>
								<a href="{{ path('app_appel_index') }}" class="btn btn-secondary">
									<i class="bi bi-x"></i>
									Ù…Ø³Ø­
								</a>
								<!-- Dans la section filtres -->
								<a href="{{ path('app_appel_export', app.request.query.all) }}" class="btn btn-success ms-2">
									<i class="bi bi-download"></i>
									ØªØµØ¯ÙŠØ±
								</a>
							</div>
						</div>
						{{ form_end(filterForm) }}
					</div>
				</div>

				<!-- Tableau des appels -->
				<table class="table table-hover">
					<thead class="table-light">
						<tr>
							<th>Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ù…ÙØ±Ø³Ù„Ø©</th>
							<th>Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„Ø©</th>
							<th>Ù†ÙˆØ¹ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø©</th>
							<th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
							<th>Ø§Ù„ÙˆÙ‚Øª</th>
						</tr>
					</thead>
					<tbody>
						{% for appel in appels %}
							<tr>
								<td>{{ appel.contactEmetteur.nom }}
									({{ appel.contactEmetteur.numero }})</td>
								<td>{{ appel.contactRecepteur.nom }}
									({{ appel.contactRecepteur.numero }})</td>
								<td>
									{% if appel.type == 'entrant' %}
										<span class="badge bg-info">ÙˆØ§Ø±Ø¯Ø©</span>
									{% else %}
										<span class="badge bg-warning">ØµØ§Ø¯Ø±Ø©</span>
									{% endif %}
								</td>
								<td>{{ appel.dateAppel|date('Y-m-d') }}</td>
								<td>{{ appel.heureAppel|date('H:i') }}</td>
							</tr>
						{% else %}
							<tr>
								<td colspan="5" class="text-center">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙƒØ§Ù„Ù…Ø§Øª.</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
	</div>
{% endblock %}
