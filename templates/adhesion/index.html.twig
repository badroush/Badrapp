{% extends 'base.html.twig' %}

{% block title %}Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡
{% endblock %}

{% block body %}
	<div class="container mt-4">
		<div class="card shadow-sm">
			<div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
				<h2 class="mb-0">ğŸ‘¥ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡</h2>
				<a href="{{ path('adhesion_new') }}" class="btn btn-light">
					<i class="bi bi-plus-circle"></i>
					Ø¥Ø¶Ø§ÙØ© Ø¹Ø¶Ùˆ Ø¬Ø¯ÙŠØ¯
				</a>
			</div>
			<div class="card-body">
				{% if adhesions is not empty %}
					<div class="table-responsive">
						<table class="table table-hover">
							<thead class="table-light">
								<tr>
									<th scope="col">#</th>
									<th scope="col">Ø§Ù„Ø§Ø³Ù…</th>
									<th scope="col">Ø§Ù„Ù„Ù‚Ø¨</th>
									<th scope="col">Ø§Ù„Ù…Ø¤Ø³Ø³Ø©</th>
									<th scope="col">ØªØ§Ø±ÙŠØ® Ø§Ù„ÙˆÙ„Ø§Ø¯Ø©</th>
									<th scope="col">Ø§Ù„Ø±Ù‚Ù…</th>
									<th scope="col">Ø³Ù†Ø© Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…</th>
									<th scope="col">Ø§Ù„ØµÙˆØ±Ø©</th>
									<th scope="col">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
								</tr>
							</thead>
							<tbody>
								{% for adhesion in adhesions %}
									<tr>
										<td>{{ adhesion.id }}</td>
										<td>{{ adhesion.nom }}</td>
										<td>{{ adhesion.prenom }}</td>
										<td>{{ adhesion.etablissement ? adhesion.etablissement.nom : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯' }}</td>
										<td>{{ adhesion.dateNaissance ? adhesion.dateNaissance|date('Y-m-d') : '' }}</td>
										<td>{{ adhesion.telephone }}</td>

										{# <td>
											{% if adhesion.etatCivil == 1 %}Ø£Ø¹Ø²Ø¨{% elseif adhesion.etatCivil == 2 %}Ù…ØªØ²ÙˆØ¬{% elseif adhesion.etatCivil == 3 %}Ù…Ø·Ù„Ù‚{% elseif adhesion.etatCivil == 4 %}Ø£Ø±Ù…Ù„
											{% endif %}
										</td> #}
										<td>{{ adhesion.anneeAdhesion }}</td>
										<td>
											{% if adhesion.photo %}
												<img src="{{ asset('uploads/photos/' ~ adhesion.photo) }}" alt="Photo" width="40" height="40" class="rounded-circle">
											{% else %}
												<span class="text-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ ØµÙˆØ±Ø©</span>
											{% endif %}
										</td>
										<td>
											{% if is_granted('ROLE_ADMIN') or is_granted('ROLE_SUPER_ADMIN') %}
												<a href="#" onclick="window.open('{{ path('adhesion_carte', {'id': adhesion.id}) }}', 'carte', 'width=300,height=190,scrollbars=no,resizable=no')" class="btn btn-sm btn-info">
													<i class="bi bi-printer"></i>
													Ø·Ø¨Ø§Ø¹Ø©
												</a>
												<a href="{{ path('app_adhesion_edit', {'id': adhesion.id}) }}" class="btn btn-sm btn-warning">
													<i class="bi bi-pencil"></i>
													ØªØ¹Ø¯ÙŠÙ„
												</a>
												<a href="{{ path('adhesion_show', {'id': adhesion.id}) }}" class="btn btn-sm btn-info">
													<i class="bi bi-eye"></i>
													Ø¹Ø±Ø¶
												</a>
												{% if adhesion.imprimer %}
													{# <span class="badge bg-success">Ù…Ø·Ø¨ÙˆØ¹Ø©</span> #}
                                                    <a href="{{ path('adhesion_imprimer', {'id': adhesion.id}) }}" class="btn btn-sm btn-success">
                                                        <i class="bi bi-printer"></i>
                                                       
														<span class="bi bi-check">Ù…Ø·Ø¨ÙˆØ¹Ø©</span>
													</a>

												{% else %}
													<a href="{{ path('adhesion_imprimer', {'id': adhesion.id}) }}" class="btn btn-sm btn-danger">
                                                        <i class="bi bi-printer"></i>
														<span class="bi bi-check"></span>
													</a>
												{% endif %}
												{# {{ include('adhesion/_delete_form.html.twig') }} #}
											{% else %}
												{% if not adhesion.valider %}
													<a href="{{ path('app_adhesion_edit', {'id': adhesion.id}) }}" class="btn btn-sm btn-warning">
														<i class="bi bi-pencil"></i>
														ØªØ¹Ø¯ÙŠÙ„
													</a>
													<a href="{{ path('adhesion_valider', {'id': adhesion.id}) }}" class="btn btn-sm btn-info">
														<i class="bi bi-check"></i>
														ØªØ­Ù‚Ù‚
													</a>
												{% else %}
													{% if adhesion.imprimer %}
														<span class="badge bg-success">Ù…Ø·Ø¨ÙˆØ¹Ø© / Ø¬Ø§Ù‡Ø²Ø©</span>
													{% else %}
														<span class="badge bg-primary">ÙÙŠ Ø¥Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©</span>
													{% endif %}
												{% endif %}
											{% endif %}
										</td>
									</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
				{% else %}
					<div class="alert alert-info text-center">
						<p class="mb-0">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø¹Ø¶Ø§Ø¡ Ù…Ø³Ø¬Ù„ÙŠÙ† Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†.</p>
					</div>
				{% endif %}
			</div>
		</div>
	</div>
{% endblock %}
