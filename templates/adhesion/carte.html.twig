<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>بطاقة العضوية</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #fff;
            overflow: hidden;
        }
        .carte {
            width: 85mm;
            height: 54mm;
            background: white;
            border: 1px solid #ccc;
            position: relative;
            overflow: hidden;
            font-size: 12px;
        }

        /* En-tête */
        .header {
            background: linear-gradient(to left, #e60000, #ffffff);
            color: white;
            text-align: center;
            padding: 4px 0;
            font-weight: bold;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo-left, .logo-right {
            width: 32px;
            height: 32px;
        }
        .logo-left img, .logo-right img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        /* Zone photo */
        .photo-zone {
            position: absolute;
            top: 20px;
            left: 35px;
            width: 60px;
            height: 60px;
            border: 2px solid #008000;
            border-radius: 50%;
            overflow: hidden;
        }
        .photo-zone img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* QR Code */
        .qr-zone {
            position: absolute;
            top: 100px;
            right: 220px;
            width: 60px;
            height: 60px;
            border: 2px solid #e60000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ID central */
        .id-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 20px;
            font-weight: bold;
            color: #333;
        }

        /* Infos à droite */
        .infos {
            position: absolute;
            top: 70px;
            right: 15px;
            text-align: right;
            line-height: 1.4;
        }
        .infos dt {
            display: inline-block;
            width: 100px;
            font-weight: bold;
            color: #e60000;
        }
        .infos dd {
            display: inline-block;
            margin: 0 0 0 5px;
            color: #333;
        }

        /* Pied */
        .footer {
            position: absolute;
            bottom: 0;
            width: 100%;
            background: #e60000;
            color: white;
            text-align: center;
            padding: 4px 0;
            font-size: 10px;
            font-weight: bold;
        }
         /* headstyle */
        #headstyle {
            font-size: 12px;
            font-weight: bold;
            line-height: 1.1;
        }
    </style>
</head>
<body>
<div class="carte">
      <!-- En-tête avec deux logos -->
    <div class="header">
        <div class="logo-left">
            {% if app.parameter('logo_left_path') is defined and app.parameter('logo_left_path') %}
                <img src="{{ asset(app.parameter('logo_left_path')) }}" alt="Logo gauche">
            {% else %}
                <img src="{{ asset('images/drapeau.png') }}" width="128" height="128" alt="Drapeau Tunisien" class=" img-fluid">
            {% endif %}
        </div>

        <div id="headstyle" style="flex: 1; text-align: center;">
            الجمهورية التونسية<br>
            وزارة الشباب و الرياضة<br>
            المندوبية الجهوية بمدنين<br>
           {{ etablissement.nom }}
        </div>

        <div class="logo-right">
            {% if app.parameter('logo_right_path') is defined and app.parameter('logo_right_path') %}
                
            {% else %}
                <img src="{{ asset('images/mjs.png') }}" alt="Logo Badr App" class="app-logo img-fluid">
            {% endif %}
        </div>
    </div>

    <!-- Photo -->
    <div class="photo-zone">
        {% if adhesion.photo %}
            <img src="{{ asset('uploads/photos/' ~ adhesion.photo) }}" alt="Photo">
        {% else %}
            <svg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">
                <rect width="60" height="60" fill="#f0f0f0" rx="50"/>
                <circle cx="30" cy="20" r="10" fill="#ccc"/>
                <path d="M20 35 Q30 45 40 35" stroke="#aaa" fill="none" stroke-width="2"/>
            </svg>
        {% endif %}
    </div>

    <!-- QR Code -->
    <div class="qr-zone">
        {% set qr_data = adhesion.id ~ '|' ~ adhesion.nom ~ '|' ~ adhesion.prenom %}
        <img src="https://api.qrserver.com/v1/create-qr-code/?size=60x60&data={{ qr_data|url_encode }}" alt="QR Code">
    </div>

    <!-- ID central -->
    <div class="id-center"></div>

    <!-- Infos à droite -->
    <div class="infos">
        <dl><dt>الاسم :</dt>
            <dd>{{ adhesion.nom ?? '' }}</dd><br>
            <dt>اللقب :</dt>
            <dd>{{ adhesion.prenom ?? '' }}</dd><br>
            <dt>ت.الولادة :</dt>
            <dd>{{ adhesion.dateNaissance ? adhesion.dateNaissance|date('Y/m/d') : '' }}</dd><br>
            <dt>العنوان :</dt>
            <dd>{{ adhesion.adresse ?? '' }}</dd><br>
            <dt>ت. الإنضمام  :</dt>
            <dd>{{ adhesion.dateAdhesion ? adhesion.dateAdhesion|date('Y/d/m') : '' }}</dd>
        </dl>
    </div>

    <!-- Pied -->
    <div class="footer">
        هذه البطاقة صالحة لمدة سنة واحدة من تاريخ الانضمام
    </div>
</div>
</body>
</html>